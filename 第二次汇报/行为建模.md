# **行为建模**

---

## 1. **核心业务流程活动图**

```mermaid
graph TD
    A[启动数据采集] --> B{多源数据输入}
    B -->|传感器网络| C[实时数据清洗]
    B -->|卫星遥感| C
    B -->|气象数据库| C
    C --> D[时空数据对齐]
    D --> E{风险预测模型}
    E -->|达到阈值| F[生成预警方案]
    E -->|未达阈值| G[更新监测日志]
    F --> H[多通道发布预警]
    H --> I[用户响应跟踪]
    I --> J{反馈验证}
    J -->|有效反馈| K[更新态势评估]
    J -->|无效反馈| L[标记异常数据]
    K --> M[优化模型参数]
    L --> N[触发人工复核]
    N --> O[修正数据标注]
    O --> M
    G --> P[生成日报]
    M --> Q[系统自检]
    Q -->|正常| B
    Q -->|异常| R[切换备用节点]
    R --> B
```
**关键路径说明**
- 数据采集频率：地震数据100Hz，气象数据1分钟/次
- 模型推理窗口：台风预测每10分钟滚动更新
- 预警响应闭环：用户反馈需在5分钟内完成有效性验证

## **2.预警生命周期状态图**

```mermaid
stateDiagram-v2
    [*] --> 预警生成
    预警生成 --> 审核中: 自动触发
    审核中 --> 已发布: 政府确认
    审核中 --> 已驳回: 人工否决
    已发布 --> 传播中: 多通道发送
    传播中 --> 已接收: 用户设备确认
    已接收 --> 已响应: 用户确认
    已发布 --> 已升级: 风险等级变化
    已升级 --> 传播中
    已发布 --> 已过期: 超过时效
    已响应 --> 闭环完成: 反馈验证通过
    闭环完成 --> [*]
    已过期 --> [*]
    
    state 复合状态 {
        已接收 --> 未读
        已接收 --> 已读未响应
        已读未响应 --> 已响应
        已读未响应 --> 已过期
    }
```

**状态转换条件：​​**

- 自动审核通过：置信度>85%且跨部门数据一致
- 强制升级条件：3个以上传感器触发红色阈值
- 时效定义：地震预警30秒，台风预警2小时
## **3. 多通道预警顺序图**

```mermaid

sequenceDiagram
    participant 用户
    participant 移动端
    participant 预警中心
    participant 通信基站
    participant 应急广播
    
    用户 ->> 移动端: 开启定位权限
    loop 持续监测
        预警中心 ->> 预警中心: 模型计算
    end
    预警中心 ->> 移动端: 推送预警(5G)
    移动端 ->> 用户: 震动+语音提示
    alt 信号正常
        用户 ->> 移动端: 点击确认
    else 信号中断
        通信基站 ->> 应急广播: GSM广播
        应急广播 ->> 用户: 警报声+LED提示
    end
    移动端 ->> 预警中心: 反馈接收状态
    预警中心 ->> 预警中心: 更新传播态势图
    预警中心 ->> 政府平台: 同步响应数据
```
**异常处理机制：​​**
- A. 5G信道拥塞时自动降级到2G CBS广播
- B. 移动端无响应时触发无人机喊话（10分钟内抵达）
- C. 重要工业企业采用专线+卫星双通道保障

### **4.模型训练活动图**

```mermaid
graph LR
    A[历史灾害库] --> B[特征工程]
    C[实时数据流] --> B
    B --> D{模型选择}
    D -->|时空预测| E[LSTM-GCN混合模型]
    D -->|因果推理| F[贝叶斯网络]
    E --> G[损失函数计算]
    F --> G
    G --> H{模型评估}
    H -->|MAE<阈值| I[模型部署]
    H -->|不达标| J[增量训练]
    J --> B
    
    subgraph 在线学习
        C --> K[数据缓冲池]
        K --> L[异常检测]
        L -->|正常| M[特征抽取]
        L -->|异常| N[标记隔离]
        M --> B
    end
```
**训练策略：​​**

- 基础模型：基于10年历史数据的预训练
- 增量更新：每日凌晨1点自动执行
- 紧急训练：重大灾害发生后即时触发

### **5.用户反馈验证状态图**

```mermaid
stateDiagram-v2
    [*] --> 待验证
    待验证 --> 定位校验: 自动触发
    
    定位校验 -->|坐标匹配| 时间校验
    定位校验 -->|坐标异常| 人工复核
    
    state 人工复核 {
        [*] --> 初步审核
        初步审核 --> 二次验证: 坐标误差<100m
        初步审核 --> 标记可疑: 坐标误差≥100m
        二次验证 --> 时间校验: 修正坐标
        二次验证 --> 标记可疑: 无法修正
    }
    
    人工复核 --> 时间校验: 复核通过
    人工复核 --> 标记可疑: 复核失败
    
    时间校验 -->|时效内| 内容分析
    时间校验 -->|超时| 标记过期
    标记过期 --> [*] : 清理过期数据
    
    state 内容分析 {
        [*] --> NLP置信度判断
        NLP置信度判断 --> 高置信度: 可信度>90%
        NLP置信度判断 --> 低置信度: 可信度≤90%
        
        高置信度 --> 验证通过
        低置信度 --> 证据链核查: 启动多模态验证
        
        证据链核查 --> 图像验证
        证据链核查 --> 视频验证
        
        图像验证 --> 验证通过: 特征匹配成功
        视频验证 --> 验证通过: 时空一致性验证
        图像验证 --> 标记可疑: 匹配失败
        视频验证 --> 标记可疑: 验证失败
    }
    
    内容分析 --> 标记可疑: 存在矛盾
    标记可疑 --> [*] : 隔离可疑数据
    
    验证通过 --> 闭环完成 : 数据归档/更新知识库
    闭环完成 --> [*]
    
    state 异常处理 {
        [*] --> 数据异常: 系统崩溃/网络中断
        数据异常 --> 恢复校验: 故障恢复
        恢复校验 --> 定位校验: H[续接校验流程]
    }
```

**验证技术指标：​​**

- 定位精度：城市区域≤50米，乡村≤500米
- NLP分析：支持8种方言语音转文本
- 图像验证：灾损特征识别准确率≥92%


